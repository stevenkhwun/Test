---
title: "Exploratory Data Analysis"
author: "SW"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Estimates of Location

### The data


```{r}
# Get the data
csv <- "https://raw.githubusercontent.com/stevenkhwun/Online-resources/refs/heads/main/Data/Practical-Statistics/state.csv"
state <- read.csv(csv)
# View the dataset
dim(state)
head(state, n = 5)
summary(state)
```

### Mean, trimmed mean, and median

Compute the mean, trimmed mean, and median for the population using _R_:

```{r}
# Mean
mean(state[["Population"]])
# Trimmed mean
mean(state[["Population"]], trim = 0.1)
# Median
median(state[["Population"]])
```

### Weighted mean and weighted median

```{r}
# Weighted mean
weighted.mean(state[["Murder.Rate"]], w=state[["Population"]])
```

> Notes on R:<br>
  Since base _R_ doesn't have a function for weighted median, We need to install a package such as `matrixStats`.

```{r}
library("matrixStats")
weightedMedian(state[["Murder.Rate"]], w=state[["Population"]])
```


## Estimates of Variability

### Key Terms for Variability Metrics

* Deviations (errors, residuals): The difference between the observed values and the estimate of location.
* Variance (mean-squared-error): The sum of squared deviations from the mean divided by $n-1$ where $n$ is the number of data values.
* Standard deviation: The square root of the variance.
* Mean absolute deviation (l1-norm, Manhattan norm): The mean of the absolute values of the deviations from the mean.
* Median absolute deviation from the median (MAD): The median of the absolute values of the deviations from the median.
* Range: The difference between the largest and the smallest value in a data set.
* Order statistics (ranks): Metrics based on the data values sorted from smallest to biggest.
* Percentile (quantile): The value such that $P$ percent of the values take on this value or less and $(100-P)$ percent take on this value or more.
* Interquartile range (IQR): The difference between 75th percentile and the 25th percentile.

```{r}
# Access the data from my Dell Laptop
data_path <- "C:/Users/steve/GitHub/Online-resources/Data/Practical-Statistics"
sp500_px <- read.csv(file.path(data_path, "sp500_data.csv.gz"), row.names = 1)
dim(sp500_px)
```

```{r}
# Access the data from GitHub
csv <- "https://raw.githubusercontent.com/stevenkhwun/Online-resources/refs/heads/main/Data/Practical-Statistics/sp500_sectors.csv"
sp500_sym <- read.csv(csv, stringsAsFactors = FALSE)
dim(sp500_sym)
```


```{r}
etfs <- sp500_px[row.names(sp500_px) > '2012-07-01',
                 sp500_sym[sp500_sym$sector == 'etf', 'symbol']]
library(corrplot)
corrplot(cor(etfs), method = 'ellipse')
```

```{r}
telecom <- sp500_px[, sp500_sym[sp500_sym$sector == 'telecommunications_services', 'symbol']]
dim(telecom)
head(telecom, n = 5)
telecom <- telecom[row.names(telecom) > '2012-07-01',]
telecom_cor <- cor(telecom)
telecom_cor
```